doctype html
html(ng-app="syntaxDash", ng-controller="syntaxDashCtrl")
  head
    base(href="/sublime-syntax-dashboard/")
    meta(charset='utf-8')
    meta(http-equiv='X-UA-Compatible' content='IE=edge')
    meta(http-equiv='content-type' content='text/html; charset=UTF-8')
    title {{syntax}} &middot; Sublime Syntax Dashboard
    meta(
      name='description'
      content="Insights into Sublime Text's default syntaxes"
    )
    meta(name='viewport' content='width=device-width, initial-scale=1, minimum-scale=1')
    link(rel='icon' type='image/x-icon' href='favicon.ico')
    link(href='main.min.css' rel='stylesheet' type='text/css' media='all')
    link(
      href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,700italic,800,800italic'
      rel='stylesheet'
      type='text/css'
    )
    if (release === false)
      script(src="//localhost:35729/livereload.js" async)
      script(src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular.js")
    else
      script(src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular.min.js")
    script(src="main.min.js")
    script(src="https://cdnjs.cloudflare.com/ajax/libs/angular-loading-bar/0.9.0/loading-bar.min.js")
  body
    .catch-all(ng-class="{active: navIsActive}" ng-click="toggleNav()")
    .header-wrapper
      .dropdown-container
        button.dropdown-initer.header-current-page(ng-click="toggleNav()") {{syntax}}
        .dropdown-wrapper(ng-class="{active: navIsActive}")
          ul.dropdown-menu(role="navigation")
            li(
              ng-repeat="syntax in syntaxes"
              ng-click="fetchSyntaxData(syntax)"
            ) {{syntax}}
    .main-content
      .at-a-glance
        .stat-blocks
          .stat-block(agg-stat ng-repeat="(label, data) in aggregate")
            h3 {{label}}
            h2 {{data}}
            //- svg.svg-graph(ng-class="['green','red','purple','orange','pink','aqua','lime','yellow'][$index]" ng-attr-width="{{graph.width}}" ng-attr-height="{{graph.height}}")
            //-     g
            //-       g.bar(
            //-         ng-attr-transform="translate({{graph.barX($index)}}, 0)"
            //-         ng-repeat="stat in graph.data"
            //-         svg-tooltip="{{stat.tag}}: {{stat.scopes}}"
            //-       )
            //-         rect(
            //-           ng-attr-width="{{graph.barWidth}}"
            //-           ng-attr-height="{{graph.barHeight(stat.scopes)}}"
            //-           ng-attr-y="{{graph.barY(stat.scopes)}}"
            //-         )
      .scopes-wrapper
        h1 Scopes
        .toolbar
          input(
            type="search"
            ng-model="scopeFilter"
            placeholder="filter scopes"
            aria-label="filter scopes"
          )
        table.scope-summary
          thead
            tr
              td
                button.table-sort-button(
                  ng-click="orderBy('scope')"
                  ng-class="sortStatus('scope')"
                ) Scope
              td.scope-measure
                button.table-sort-button(
                  ng-click="orderBy('specificity')"
                  ng-class="sortStatus('specificity')"
                ) Specificity
              td.scope-measure
                button.table-sort-button(
                  ng-click="orderBy('count')"
                  ng-class="sortStatus('count')"
                ) Count
          tr.scope-summary-item(
            ng-repeat="scope in report | orderBy:scopeOrderBy:scopeOrderRev | filter:scopeFilter track by $index"
          )
            td {{scope.scope}}
            td.scope-measure
              span(ng-if="scope.specificity > 1") {{scope.specificity}}
            td.scope-measure
              span(ng-if="scope.count > 1") {{scope.count}}
    .svg-tooltip
